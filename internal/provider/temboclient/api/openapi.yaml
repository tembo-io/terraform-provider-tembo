openapi: 3.0.3
info:
  description: "Platform API for Tembo Cloud\n            </br>\n            </br>\n\
    \            To find a Tembo Data API, please find it here:\n            </br>\n\
    \            </br>\n            [AWS US East 1](https://api.data-1.use1.tembo.io/swagger-ui/)\n\
    \            "
  title: Tembo Cloud
  version: v1.0.0
servers:
- url: /
security:
- jwt_token: []
paths:
  /api/v1/apps:
    get:
      description: |
        Attributes for all apps
      operationId: get_all_apps
      responses:
        "200":
          content:
            application/json:
              schema:
                items: {}
                type: array
          description: App specification represented as JSON
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Attributes for all apps
      tags:
      - app
  /api/v1/apps/{type}:
    get:
      description: |
        Get the attributes of a single App
      operationId: get_app
      parameters:
      - example: http
        explode: false
        in: path
        name: type
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Specification of the app
        "400":
          content:
            application/json:
              schema: {}
          description: Invalid App
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Get the attributes of a single App
      tags:
      - app
  /api/v1/ask/:
    get:
      description: |
        Ask a question to Tembo Docs
      operationId: ask
      parameters:
      - description: "The ask query. For example, \"how to create a Tembo instance\""
        explode: true
        in: query
        name: query
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AskResult'
          description: Answer to the question
        "400":
          content:
            application/json:
              schema: {}
          description: Invalid Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Ask a question to Tembo Docs
      tags:
      - ai
  /api/v1/orgs/instances/schema:
    get:
      description: |
        Get the json-schema for an instance
      operationId: get_schema
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: json-schema for a Tembo Instance
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Get the json-schema for an instance
      tags:
      - instance
  /api/v1/orgs/{org_id}/actions:
    get:
      description: Get all actions
      operationId: get_actions
      parameters:
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Action'
                type: array
          description: All actions available in your organization
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Get all actions
      tags:
      - rbac
  /api/v1/orgs/{org_id}/dataplanes:
    get:
      operationId: get_all_dataplanes
      parameters:
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/DataPlane'
                type: array
          description: List of all data planes
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      tags:
      - dataplane
  /api/v1/orgs/{org_id}/instances:
    get:
      description: |
        Get all Tembo instances in an organization
      operationId: get_all
      parameters:
      - description: organization id for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Instance'
                type: array
          description: All instances in your org
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid org_id
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Get all Tembo instances in an organization
      tags:
      - instance
    post:
      description: |
        Create a new Tembo instance
      operationId: create_instance
      parameters:
      - description: Organization ID that owns the Tembo instance
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            example:
              stack_type: OLTP
              instance_name: my-tembo-instance
              cpu: "1"
              memory: 2Gi
              storage: 10Gi
              replicas: 1
              environment: dev
              spot: true
            schema:
              $ref: '#/components/schemas/CreateInstance'
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Instance'
          description: Creating new Tembo instance
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid request parameters
        "401":
          content:
            text/plain:
              schema:
                type: string
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Naming conflict
      summary: Create a new Tembo instance
      tags:
      - instance
  /api/v1/orgs/{org_id}/instances/{instance_id}:
    delete:
      description: |
        Delete an existing Tembo instance
      operationId: delete_instance
      parameters:
      - description: Organization id of the instance to delete
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      - description: Delete this instance id
        explode: false
        in: path
        name: instance_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Instance'
          description: Deleting instance
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid request parameters
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid state transition
      summary: Delete an existing Tembo instance
      tags:
      - instance
    get:
      description: |
        Get an existing Tembo instance
      operationId: get_instance
      parameters:
      - description: Organization ID that owns the instance
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: instance_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Instance'
          description: Tembo.toml File Content
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid org_id
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Instance not found
      summary: Get an existing Tembo instance
      tags:
      - instance
    patch:
      description: |
        Update attributes on an existing Tembo instance
      operationId: patch_instance
      parameters:
      - description: Organization ID that owns the instance
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: instance_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchInstance'
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Instance'
          description: Updating attributes on the instance
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid request parameters
        "401":
          content:
            text/plain:
              schema:
                type: string
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid state transition
      summary: Update attributes on an existing Tembo instance
      tags:
      - instance
    post:
      description: |-
        Lifecycle events for a Tembo instance

        Currently only supports restart
      operationId: instance_event
      parameters:
      - description: Organization ID that owns the Tembo instance
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: event_type
        required: true
        schema:
          $ref: '#/components/schemas/InstanceEvent'
        style: form
      - explode: false
        in: path
        name: instance_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Instance'
          description: Replace the attributes of the Tembo instance
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid state transition
      summary: Lifecycle events for a Tembo instance
      tags:
      - instance
  /api/v1/orgs/{org_id}/instances/{instance_id}/history/{field}:
    get:
      description: Get historical information for a given instance
      operationId: get_instance_history
      parameters:
      - description: Defaults to 24 hours ago
        explode: true
        in: query
        name: start
        required: false
        schema:
          format: date-time
          nullable: true
          type: string
        style: form
      - description: Defaults to now
        explode: true
        in: query
        name: end
        required: false
        schema:
          format: date-time
          nullable: true
          type: string
        style: form
      - description: Page to check
        explode: true
        in: query
        name: page
        required: false
        schema:
          format: int32
          minimum: 0
          type: integer
        style: form
      - description: The maximum number of results per page
        explode: true
        in: query
        name: limit
        required: false
        schema:
          format: int32
          minimum: 0
          type: integer
        style: form
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      - description: The instance ID for the request
        explode: false
        in: path
        name: instance_id
        required: true
        schema:
          type: string
        style: simple
      - description: "The field of the instance we are retrieving history for, currently\
          \ only 'state' is supported"
        explode: false
        in: path
        name: field
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HistoryPage'
          description: Historical results for the given instance are returned
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Instance not found
      summary: Get historical information for a given instance
      tags:
      - instance
  /api/v1/orgs/{org_id}/instances/{instance_id}/toml:
    get:
      description: |
        Generate text for Tembo.toml
      operationId: get_instance_toml
      parameters:
      - description: Organization ID that owns the instance
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: instance_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              example:
                tembo.toml: |
                  [my-tembo-instance]
                  environment = "dev"
                  instance_name = "my-tembo-instance"
                  cpu = "0.25"
                  memory = "1Gi"
                  storage = "10Gi"
                  replicas = 1
                  stack_type = "OLTP"
                  pg_version = 15

                  [my-tembo-instance.extensions.pg_stat_statements]
              schema: {}
          description: The requested Tembo instance
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              example:
                error: User not authorized for this organization
                type: NotAuthorized
              schema: {}
          description: Forbidden
      summary: Generate text for Tembo.toml
      tags:
      - instance
  /api/v1/orgs/{org_id}/policies:
    delete:
      description: Delete a policy
      operationId: delete_policy
      parameters:
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PolicyInput'
        description: Policy to delete
        required: true
      responses:
        "200":
          content:
            text/plain:
              schema:
                type: string
          description: Policy deleted or didn't exist
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Delete a policy
      tags:
      - rbac
    get:
      description: Get all policies
      operationId: get_policies
      parameters:
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/PolicyData'
                type: array
          description: All policies for your organization
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Get all policies
      tags:
      - rbac
    post:
      description: Create or update a policy
      operationId: set_policy
      parameters:
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PolicyInput'
        description: Policy to set
        required: true
      responses:
        "200":
          content:
            text/plain:
              schema:
                type: string
          description: Policy updated successfully
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid request body
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Create or update a policy
      tags:
      - rbac
  /api/v1/orgs/{org_id}/restore:
    post:
      description: |
        Restore a Tembo instance
      operationId: restore_instance
      parameters:
      - description: Organization ID that owns the Tembo instance
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RestoreInstance'
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Instance'
          description: Restoring to a new Tembo instance
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Invalid request parameters
        "401":
          content:
            text/plain:
              schema:
                type: string
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Naming conflict
      summary: Restore a Tembo instance
      tags:
      - instance
  /api/v1/orgs/{org_id}/roles:
    get:
      description: Get all roles
      operationId: get_roles
      parameters:
      - description: Organization ID for the request
        explode: false
        in: path
        name: org_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Role'
                type: array
          description: All roles in your organization
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Get all roles
      tags:
      - rbac
  /api/v1/search/:
    get:
      description: |
        Search Tembo Docs Database
      operationId: search
      parameters:
      - description: "The search query. For example, \"how to create a Tembo instance\""
        explode: true
        in: query
        name: query
        required: true
        schema:
          type: string
        style: form
      - description: "The number of results to return. Default is 10, max is 20."
        explode: true
        in: query
        name: limit
        required: false
        schema:
          format: int32
          nullable: true
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'
          description: Search results
        "400":
          content:
            application/json:
              schema: {}
          description: Invalid Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Search Tembo Docs Database
      tags:
      - ai
  /api/v1/stacks:
    get:
      description: |
        Attributes for all stacks
      operationId: get_all_entities
      responses:
        "200":
          content:
            application/json:
              schema:
                items: {}
                type: array
          description: Stack specification represented as JSON
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Attributes for all stacks
      tags:
      - stack
  /api/v1/stacks/{type}:
    get:
      description: |
        Get the attributes of a single stack
      operationId: get_entity
      parameters:
      - description: the type of entity
        example: standard
        explode: false
        in: path
        name: type
        required: true
        schema:
          $ref: '#/components/schemas/StackType'
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Specification of the entity
        "400":
          content:
            application/json:
              schema: {}
          description: Invalid Stack
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
      summary: Get the attributes of a single stack
      tags:
      - stack
  /api/v1/tokens/invalidate:
    delete:
      description: |-
        Invalidate the token included in the Authorization header

        May take a up to a minute for subsequent requests to be rejected
        after the invalidation has been accepted.
      operationId: invalidate_token
      responses:
        "200":
          content:
            text/plain:
              schema:
                type: string
          description: The token included in the Authorization header has been invalidated
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseSchema'
          description: Forbidden
      summary: Invalidate the token included in the Authorization header
      tags:
      - tokens
components:
  schemas:
    Action:
      example:
        name: Create Instance
        description: Allows creating a new instance within an organization.
        id: CreateInstance
      properties:
        description:
          example: Allows creating a new instance within an organization.
          type: string
        id:
          description: |-
            A valid Action ID. Available Action IDs include 'CreateInstance' and 'ManagePermissions'.
            Find all available Actions on the Actions API.
          example: CreateInstance
          type: string
        name:
          example: Create Instance
          type: string
      required:
      - description
      - id
      - name
      type: object
    AppConfig:
      properties:
        env:
          items:
            $ref: '#/components/schemas/EnvVar'
          nullable: true
          type: array
        resources:
          allOf:
          - $ref: '#/components/schemas/ResourceRequirements'
          nullable: true
      type: object
    AppMetrics:
      properties:
        path:
          description: path to scrape metrics
          type: string
        port:
          description: "port must be also exposed in one of AppService.routing[]"
          format: int32
          minimum: 0
          type: integer
      required:
      - path
      - port
      type: object
    AppService:
      description: |-
        AppService significantly extends the functionality of your Tembo Postgres
        instance by running tools and software built by the Postgres open source community.

        **Example**: This will configure and install a Postgrest container along side
        the Postgres instance, install pg_graphql extension, and configure the
        ingress routing to expose the Postgrest service.

        ```yaml
        apiVersion: coredb.io/v1alpha1
        kind: CoreDB
        metadata:
        name: test-db
        spec:
        trunk_installs:
        - name: pg_graphql
        version: 1.2.0
        extensions:
        - name: pg_graphql
        locations:
        - database: postgres
        enabled: true

        appServices:
        - name: postgrest
        image: postgrest/postgrest:v10.0.0
        routing:
        # only expose /rest/v1 and /graphql/v1
        - port: 3000
        ingressPath: /rest/v1
        middlewares:
        - my-headers
        - port: 3000
        ingressPath: /graphql/v1
        middlewares:
        - map-gql
        - my-headers
        middlewares:
        - customRequestHeaders:
        name: my-headers
        config:
        # removes auth header from request
        Authorization: ""
        Content-Profile: graphql
        Accept-Profile: graphql
        - stripPrefix:
        name: my-strip-prefix
        config:
        - /rest/v1
        # reroute gql and rest requests
        - replacePathRegex:
        name: map-gql
        config:
        regex: \/graphql\/v1\/?
        replacement: /rpc/resolve
        env:
        - name: PGRST_DB_URI
        valueFromPlatform: ReadWriteConnection
        - name: PGRST_DB_SCHEMA
        value: "public, graphql"
        - name: PGRST_DB_ANON_ROLE
        value: postgres
        - name: PGRST_LOG_LEVEL
        value: info
        ```
      properties:
        args:
          description: |-
            Defines the arguments to pass into the container if needed.
            You define this in the same manner as you would for all Kubernetes containers.
            See the [Kubernetes docs](https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container).
          items:
            type: string
          nullable: true
          type: array
        command:
          description: |-
            Defines the command into the container if needed.
            You define this in the same manner as you would for all Kubernetes containers.
            See the [Kubernetes docs](https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container).
          items:
            type: string
          nullable: true
          type: array
        env:
          description: |-
            Defines the environment variables to pass into the container if needed.
            You define this in the same manner as you would for all Kubernetes containers.
            See the [Kubernetes docs](https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container).
          items:
            $ref: '#/components/schemas/EnvVar'
          nullable: true
          type: array
        image:
          description: Defines the container image to use for the appService.
          type: string
        metrics:
          allOf:
          - $ref: '#/components/schemas/AppMetrics'
          nullable: true
        middlewares:
          description: |-
            Defines the ingress middeware configuration for the appService.
            This is specifically configured for the ingress controller Traefik.
          items:
            $ref: '#/components/schemas/Middleware'
          nullable: true
          type: array
        name:
          description: Defines the name of the appService.
          type: string
        probes:
          allOf:
          - $ref: '#/components/schemas/Probes'
          nullable: true
        resources:
          $ref: '#/components/schemas/ResourceRequirements'
        routing:
          description: Defines the routing configuration for the appService.
          items:
            $ref: '#/components/schemas/Routing'
          nullable: true
          type: array
        storage:
          allOf:
          - $ref: '#/components/schemas/StorageConfig'
          nullable: true
      required:
      - image
      - name
      type: object
    AppType:
      oneOf:
      - $ref: '#/components/schemas/AppType_oneOf'
      - $ref: '#/components/schemas/AppType_oneOf_1'
      - $ref: '#/components/schemas/AppType_oneOf_2'
      - $ref: '#/components/schemas/AppType_oneOf_3'
      - $ref: '#/components/schemas/AppType_oneOf_4'
      - $ref: '#/components/schemas/AppType_oneOf_5'
      - $ref: '#/components/schemas/AppType_oneOf_6'
    AskParams:
      properties:
        query:
          description: "The ask query. For example, \"how to create a Tembo instance\""
          type: string
      required:
      - query
      type: object
    AskResult:
      example:
        context:
        - file_path: file_path
          front_matter: ""
          similarity_score: 0.8008281904610115
        - file_path: file_path
          front_matter: ""
          similarity_score: 0.8008281904610115
        chat_response: chat_response
      properties:
        chat_response:
          description: "The ask query. For example, \"how to create a Tembo instance\""
          type: string
        context:
          description: an array of json objects referencing documents used to generate
            the response
          items:
            $ref: '#/components/schemas/SearchResponse'
          nullable: true
          type: array
      required:
      - chat_response
      type: object
    AutoStop:
      description: |-
        AutoStop configures automatic stopping of idle instances.
        An instance is considered idle if it is more than two days old, hasn't been connected to in over a day, and has not been resumed within the last day.
        Idle instances are stopped in the time window 9-9:30 AM ET.
      example:
        enabled: true
      properties:
        enabled:
          description: Enable automatic stopping of the instance when idle.
          type: boolean
      required:
      - enabled
      type: object
    Autoscaling:
      example:
        storage:
          maximum: ""
          enabled: true
        autostop:
          enabled: true
      properties:
        autostop:
          $ref: '#/components/schemas/AutoStop'
        storage:
          $ref: '#/components/schemas/AutoscalingStorage'
      type: object
    AutoscalingStorage:
      description: AutoscalingStorage configures the automatic scaling of instance
        storage.
      example:
        maximum: ""
        enabled: true
      properties:
        enabled:
          description: Enable autoscaling for storage
          type: boolean
        maximum:
          allOf:
          - $ref: '#/components/schemas/Storage'
          nullable: true
      required:
      - enabled
      type: object
    ConnectionInfo:
      properties:
        host:
          type: string
        pooler_host:
          nullable: true
          type: string
        port:
          format: int32
          type: integer
        user:
          type: string
      required:
      - host
      - port
      - user
      type: object
    ConnectionPooler:
      description: |-
        A connection pooler is a tool used to manage database connections, sitting
        between your application and Postgres instance. Because of the way Postgres
        handles connections, the server may encounter resource constraint issues
        when managing a few thousand connections. Using a pooler can alleviate these
        issues by using actual Postgres connections only when necessary

        **Example**: A typical connection pooler configuration

        ```yaml
        apiVersion: coredb.io/v1alpha1
        kind: CoreDB
        metadata:
        name: test-db
        spec:
        connectionPooler:
        enabled: true
        pooler:
        poolMode: transaction
        # Valid parameter values can be found at https://www.pgbouncer.org/config.html
        parameters:
        default_pool_size: "50"
        max_client_conn: "5000"
        resources:
        limits:
        cpu: 200m
        memory: 256Mi
        requests:
        cpu: 100m
        memory: 128Mi
        ```
      properties:
        enabled:
          description: |-
            Enable the connection pooler

            **Default**: false.
          type: boolean
        pooler:
          $ref: '#/components/schemas/PgBouncer'
      type: object
    Cpu:
      enum:
      - "0.25"
      - "0.5"
      - "1"
      - "2"
      - "4"
      - "6"
      - "8"
      - "12"
      - "16"
      - "32"
      type: string
    CreateInstance:
      example:
        instance_name: instance_name
        memory: 512Mi
        app_services:
        - restapi: ""
        - restapi: ""
        replicas: 6
        region_id: region_id
        cpu: "0.25"
        experimental: ""
        storage: 10Gi
        environment: dev
        extensions:
        - name: name
          description: description
          locations:
          - schema: schema
            database: database
            version: version
            enabled: true
          - schema: schema
            database: database
            version: version
            enabled: true
        - name: name
          description: description
          locations:
          - schema: schema
            database: database
            version: version
            enabled: true
          - schema: schema
            database: database
            version: version
            enabled: true
        extra_domains_rw:
        - extra_domains_rw
        - extra_domains_rw
        dedicated_networking: ""
        stack_type: Analytics
        postgres_configs:
        - name: name
          value: value
        - name: name
          value: value
        spot: true
        trunk_installs:
        - name: name
          version: version
        - name: name
          version: version
        provider_id: provider_id
        autoscaling: ""
        ip_allow_list:
        - ip_allow_list
        - ip_allow_list
        pg_version: 0
        connection_pooler: ""
      properties:
        app_services:
          items:
            $ref: '#/components/schemas/AppType'
          nullable: true
          type: array
        autoscaling:
          allOf:
          - $ref: '#/components/schemas/PatchAutoscaling'
          nullable: true
        connection_pooler:
          allOf:
          - $ref: '#/components/schemas/ConnectionPooler'
          nullable: true
        cpu:
          $ref: '#/components/schemas/Cpu'
        dedicated_networking:
          allOf:
          - $ref: '#/components/schemas/dedicated_networking'
          nullable: true
        environment:
          $ref: '#/components/schemas/Environment'
        experimental:
          allOf:
          - $ref: '#/components/schemas/Experimental'
          nullable: true
        extensions:
          items:
            $ref: '#/components/schemas/Extension'
          nullable: true
          type: array
        extra_domains_rw:
          items:
            type: string
          nullable: true
          type: array
        instance_name:
          type: string
        ip_allow_list:
          items:
            type: string
          nullable: true
          type: array
        memory:
          $ref: '#/components/schemas/Memory'
        pg_version:
          format: int32
          minimum: 0
          type: integer
        postgres_configs:
          items:
            $ref: '#/components/schemas/PgConfig'
          nullable: true
          type: array
        provider_id:
          type: string
        region_id:
          type: string
        replicas:
          format: int32
          type: integer
        spot:
          nullable: true
          type: boolean
        stack_type:
          $ref: '#/components/schemas/StackType'
        storage:
          $ref: '#/components/schemas/Storage'
        trunk_installs:
          items:
            $ref: '#/components/schemas/TrunkInstall'
          nullable: true
          type: array
      required:
      - cpu
      - environment
      - instance_name
      - memory
      - stack_type
      - storage
      type: object
    DataPlane:
      example:
        region_id: use1
        index: data-1
        provider_id: aws
        region_name: US East 1 (N. Virginia)
        provider_name: AWS
        region: us-east-1
      properties:
        index:
          example: data-1
          type: string
        provider_id:
          example: aws
          type: string
        provider_name:
          example: AWS
          type: string
        region:
          example: us-east-1
          type: string
        region_id:
          example: use1
          type: string
        region_name:
          example: US East 1 (N. Virginia)
          type: string
      required:
      - index
      - provider_id
      - provider_name
      - region
      - region_id
      - region_name
      type: object
    EnvVar:
      properties:
        name:
          type: string
        value:
          nullable: true
          type: string
        valueFromPlatform:
          allOf:
          - $ref: '#/components/schemas/EnvVarRef'
          nullable: true
      required:
      - name
      type: object
    EnvVarRef:
      enum:
      - ReadOnlyConnection
      - ReadWriteConnection
      type: string
    Environment:
      enum:
      - dev
      - test
      - prod
      type: string
    ErrorResponseSchema:
      example:
        error: error
      properties:
        error:
          type: string
      required:
      - error
      type: object
    Experimental:
      properties:
        image:
          nullable: true
          type: string
      type: object
    Extension:
      description: |-
        Extension lets you define a list of extensions to enable on the instance. To enable
        extensions, you must specify the name of the extension and the database, schema, and
        version to enable it on. If the version is not specified, the latest version will be
        used.  The extension must also be installed on the instance.  To install
        extensions, please refer to the `TrunkInstall` resource.

        This example will enable the pg_stat_statements extension on the Postgres database
        in the public schema.

        ```yaml
        apiVersion: coredb.io/v1alpha1
        kind: CoreDB
        metadata:
        name: test-db
        spec:
        extensions:
        - name: pg_stat_statements
        locations:
        - database: postgres
        enabled: true
        schema: public
        version: 1.10.0
        ````
      example:
        name: name
        description: description
        locations:
        - schema: schema
          database: database
          version: version
          enabled: true
        - schema: schema
          database: database
          version: version
          enabled: true
      properties:
        description:
          description: |-
            A description of the extension. (Optional)

            **Default**: "No description provided"
          nullable: true
          type: string
        locations:
          description: A list of locations (databases) to enabled the extension on.
          items:
            $ref: '#/components/schemas/ExtensionInstallLocation'
          type: array
        name:
          description: The name of the extension to enable.
          type: string
      required:
      - locations
      - name
      type: object
    ExtensionInstallLocation:
      description: |-
        ExtensionInstallLocation lets you specify the database, schema, and version to enable
        an extension on.
      example:
        schema: schema
        database: database
        version: version
        enabled: true
      properties:
        database:
          description: |-
            The database to enable the extension on.

            **Default**: "postgres"
          type: string
        enabled:
          description: Enable or disable the extension on this Postgres instance.
          type: boolean
        schema:
          description: "The schema to enable the extension on. (eg: \"public\")"
          nullable: true
          type: string
        version:
          description: "The extension version to install. If not specified, the latest\
            \ version will be used."
          nullable: true
          type: string
      required:
      - enabled
      type: object
    ExtensionInstallLocationStatus:
      example:
        error_message: error_message
        schema: schema
        database: database
        error: true
        version: version
        enabled: true
      properties:
        database:
          type: string
        enabled:
          nullable: true
          type: boolean
        error:
          nullable: true
          type: boolean
        error_message:
          nullable: true
          type: string
        schema:
          nullable: true
          type: string
        version:
          nullable: true
          type: string
      type: object
    ExtensionStatus:
      example:
        name: name
        description: description
        locations:
        - error_message: error_message
          schema: schema
          database: database
          error: true
          version: version
          enabled: true
        - error_message: error_message
          schema: schema
          database: database
          error: true
          version: version
          enabled: true
      properties:
        description:
          nullable: true
          type: string
        locations:
          items:
            $ref: '#/components/schemas/ExtensionInstallLocationStatus'
          type: array
        name:
          type: string
      required:
      - locations
      - name
      type: object
    HeaderConfig:
      properties:
        config:
          additionalProperties:
            type: string
          type: object
        name:
          type: string
      required:
      - config
      - name
      type: object
    HistoryEntry:
      example:
        instance:
          state: Submitted
        timestamp: 2000-01-23T04:56:07.000+00:00
      properties:
        instance:
          $ref: '#/components/schemas/InstanceState'
        timestamp:
          description: The timestamp of the entry
          format: date-time
          type: string
      required:
      - instance
      - timestamp
      type: object
    HistoryPage:
      example:
        pagination:
          hasMore: true
          limit: 0
          currentPage: 0
        history:
        - instance:
            state: Submitted
          timestamp: 2000-01-23T04:56:07.000+00:00
        - instance:
            state: Submitted
          timestamp: 2000-01-23T04:56:07.000+00:00
      properties:
        history:
          description: List of historical results
          items:
            $ref: '#/components/schemas/HistoryEntry'
          type: array
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required:
      - history
      - pagination
      type: object
    Infrastructure:
      properties:
        cpu:
          type: string
        memory:
          type: string
        storage:
          type: string
      type: object
    Ingress:
      properties:
        enabled:
          type: boolean
        path:
          nullable: true
          type: string
      required:
      - enabled
      type: object
    IngressType:
      enum:
      - http
      - tcp
      type: string
    Instance:
      example:
        memory: 512Mi
        created_at: 2000-01-23T04:56:07.000+00:00
        storage: 10Gi
        postgres_version: 0
        dedicated_networking: ""
        dataplane_index: dataplane_index
        postgres_configs:
        - name: name
          value: value
        - name: name
          value: value
        trunk_installs:
        - error_message: error_message
          installed_to_pods:
          - installed_to_pods
          - installed_to_pods
          name: name
          error: true
          loading: true
          version: version
        - error_message: error_message
          installed_to_pods:
          - installed_to_pods
          - installed_to_pods
          name: name
          error: true
          loading: true
          version: version
        region_name: region_name
        state: Submitted
        first_recoverability_time: 2000-01-23T04:56:07.000+00:00
        image: image
        instance_name: instance_name
        app_services:
        - restapi: ""
        - restapi: ""
        replicas: 6
        region_id: region_id
        cpu: "0.25"
        last_wal_archive_status: 2000-01-23T04:56:07.000+00:00
        organization_name: organization_name
        runtime_config:
        - name: name
          value: value
        - name: name
          value: value
        environment: dev
        extensions:
        - name: name
          description: description
          locations:
          - error_message: error_message
            schema: schema
            database: database
            error: true
            version: version
            enabled: true
          - error_message: error_message
            schema: schema
            database: database
            error: true
            version: version
            enabled: true
        - name: name
          description: description
          locations:
          - error_message: error_message
            schema: schema
            database: database
            error: true
            version: version
            enabled: true
          - error_message: error_message
            schema: schema
            database: database
            error: true
            version: version
            enabled: true
        extra_domains_rw:
        - extra_domains_rw
        - extra_domains_rw
        instance_id: instance_id
        stack_type: Analytics
        connection_info: ""
        last_updated_at: 2000-01-23T04:56:07.000+00:00
        organization_id: organization_id
        spot: true
        namespace: namespace
        provider_id: provider_id
        autoscaling:
          storage:
            maximum: ""
            enabled: true
          autostop:
            enabled: true
        ip_allow_list:
        - ip_allow_list
        - ip_allow_list
        connection_pooler: ""
      properties:
        app_services:
          items:
            $ref: '#/components/schemas/AppType'
          nullable: true
          type: array
        autoscaling:
          $ref: '#/components/schemas/Autoscaling'
        connection_info:
          allOf:
          - $ref: '#/components/schemas/ConnectionInfo'
          nullable: true
        connection_pooler:
          allOf:
          - $ref: '#/components/schemas/ConnectionPooler'
          nullable: true
        cpu:
          $ref: '#/components/schemas/Cpu'
        created_at:
          format: date-time
          type: string
        dataplane_index:
          type: string
        dedicated_networking:
          allOf:
          - $ref: '#/components/schemas/dedicated_networking'
          nullable: true
        environment:
          $ref: '#/components/schemas/Environment'
        extensions:
          items:
            $ref: '#/components/schemas/ExtensionStatus'
          nullable: true
          type: array
        extra_domains_rw:
          items:
            type: string
          nullable: true
          type: array
        first_recoverability_time:
          format: date-time
          nullable: true
          type: string
        image:
          nullable: true
          type: string
        instance_id:
          type: string
        instance_name:
          type: string
        ip_allow_list:
          items:
            type: string
          nullable: true
          type: array
        last_updated_at:
          format: date-time
          type: string
        last_wal_archive_status:
          format: date-time
          nullable: true
          type: string
        memory:
          $ref: '#/components/schemas/Memory'
        namespace:
          type: string
        organization_id:
          type: string
        organization_name:
          deprecated: true
          type: string
        postgres_configs:
          items:
            $ref: '#/components/schemas/PgConfig'
          nullable: true
          type: array
        postgres_version:
          description: |-
            Major Postgres version this instance is using.
            Currently: 14, 15, 16 and 17
          format: int32
          minimum: 0
          type: integer
        provider_id:
          type: string
        region_id:
          type: string
        region_name:
          type: string
        replicas:
          format: int32
          type: integer
        runtime_config:
          items:
            $ref: '#/components/schemas/PgConfig'
          nullable: true
          type: array
        spot:
          nullable: true
          type: boolean
        stack_type:
          $ref: '#/components/schemas/StackType'
        state:
          $ref: '#/components/schemas/State'
        storage:
          $ref: '#/components/schemas/Storage'
        trunk_installs:
          items:
            $ref: '#/components/schemas/TrunkInstallStatus'
          nullable: true
          type: array
      required:
      - autoscaling
      - cpu
      - dataplane_index
      - environment
      - instance_id
      - instance_name
      - memory
      - namespace
      - organization_id
      - organization_name
      - postgres_version
      - provider_id
      - region_id
      - region_name
      - replicas
      - stack_type
      - state
      - storage
      type: object
    InstanceEvent:
      enum:
      - restart
      - stop
      - start
      type: string
    InstanceState:
      example:
        state: Submitted
      properties:
        state:
          $ref: '#/components/schemas/State'
      required:
      - state
      type: object
    IntOrString:
      oneOf:
      - $ref: '#/components/schemas/IntOrString_oneOf'
      - $ref: '#/components/schemas/IntOrString_oneOf_1'
    Memory:
      enum:
      - 512Mi
      - 1Gi
      - 2Gi
      - 4Gi
      - 8Gi
      - 12Gi
      - 16Gi
      - 24Gi
      - 32Gi
      - 64Gi
      type: string
    Middleware:
      description: |-
        Midddleware is used to configure the middleware for the appService.
        This is specifically configured for the ingress controller Traefik.

        Please refer to the example in the `AppService` documentation.
      oneOf:
      - $ref: '#/components/schemas/Middleware_oneOf'
      - $ref: '#/components/schemas/Middleware_oneOf_1'
      - $ref: '#/components/schemas/Middleware_oneOf_2'
    PaginationInfo:
      example:
        hasMore: true
        limit: 0
        currentPage: 0
      properties:
        currentPage:
          description: The page returned
          format: int32
          minimum: 0
          type: integer
        hasMore:
          description: True if more results are available on the next page
          type: boolean
        limit:
          description: The maximum number of results returned
          format: int32
          minimum: 0
          type: integer
      required:
      - currentPage
      - hasMore
      - limit
      type: object
    PatchAutoscaling:
      properties:
        autostop:
          allOf:
          - $ref: '#/components/schemas/AutoStop'
          nullable: true
        storage:
          allOf:
          - $ref: '#/components/schemas/AutoscalingStorage'
          nullable: true
      type: object
    PatchInstance:
      example:
        instance_name: instance_name
        memory: ""
        app_services:
        - restapi: ""
        - restapi: ""
        replicas: ""
        cpu: ""
        experimental: ""
        storage: ""
        environment: ""
        extensions:
        - name: name
          description: description
          locations:
          - schema: schema
            database: database
            version: version
            enabled: true
          - schema: schema
            database: database
            version: version
            enabled: true
        - name: name
          description: description
          locations:
          - schema: schema
            database: database
            version: version
            enabled: true
          - schema: schema
            database: database
            version: version
            enabled: true
        extra_domains_rw:
        - extra_domains_rw
        - extra_domains_rw
        dedicated_networking: ""
        postgres_configs:
        - name: name
          value: value
        - name: name
          value: value
        spot: true
        trunk_installs:
        - name: name
          version: version
        - name: name
          version: version
        autoscaling: ""
        ip_allow_list:
        - ip_allow_list
        - ip_allow_list
        connection_pooler: ""
      properties:
        app_services:
          items:
            $ref: '#/components/schemas/AppType'
          nullable: true
          type: array
        autoscaling:
          allOf:
          - $ref: '#/components/schemas/PatchAutoscaling'
          nullable: true
        connection_pooler:
          allOf:
          - $ref: '#/components/schemas/ConnectionPooler'
          nullable: true
        cpu:
          allOf:
          - $ref: '#/components/schemas/Cpu'
          nullable: true
        dedicated_networking:
          allOf:
          - $ref: '#/components/schemas/dedicated_networking'
          nullable: true
        environment:
          allOf:
          - $ref: '#/components/schemas/Environment'
          nullable: true
        experimental:
          allOf:
          - $ref: '#/components/schemas/Experimental'
          nullable: true
        extensions:
          items:
            $ref: '#/components/schemas/Extension'
          nullable: true
          type: array
        extra_domains_rw:
          items:
            type: string
          nullable: true
          type: array
        instance_name:
          nullable: true
          type: string
        ip_allow_list:
          items:
            type: string
          nullable: true
          type: array
        memory:
          allOf:
          - $ref: '#/components/schemas/Memory'
          nullable: true
        postgres_configs:
          items:
            $ref: '#/components/schemas/PgConfig'
          nullable: true
          type: array
        replicas:
          allOf:
          - $ref: '#/components/schemas/Replicas'
          nullable: true
        spot:
          nullable: true
          type: boolean
        storage:
          allOf:
          - $ref: '#/components/schemas/Storage'
          nullable: true
        trunk_installs:
          items:
            $ref: '#/components/schemas/TrunkInstall'
          nullable: true
          type: array
      type: object
    PgBouncer:
      description: PgBouncer is the type for the PGBouncer configuration
      properties:
        parameters:
          additionalProperties:
            type: string
          description: "Valid pgbouncer parameter values can be found at [https://www.pgbouncer.org/config.html](https://www.pgbouncer.org/config.html)"
          nullable: true
          type: object
        poolMode:
          $ref: '#/components/schemas/PoolerPgbouncerPoolMode'
        resources:
          allOf:
          - $ref: '#/components/schemas/PoolerTemplateSpecContainersResources'
          nullable: true
      type: object
    PgConfig:
      example:
        name: name
        value: value
      properties:
        name:
          type: string
        value:
          type: string
      required:
      - name
      - value
      type: object
    PolicyData:
      example:
        policies:
        - role: admin
          allowed: true
          action: CreateInstance
        - role: admin
          allowed: true
          action: CreateInstance
      properties:
        policies:
          items:
            $ref: '#/components/schemas/PolicyInput'
          type: array
      required:
      - policies
      type: object
    PolicyInput:
      example:
        role: admin
        allowed: true
        action: CreateInstance
      properties:
        action:
          description: |-
            A valid Action ID. Available Action IDs include 'CreateInstance' and 'ManagePermissions'.
            Find all available Actions on the Actions API.
          example: CreateInstance
          type: string
        allowed:
          description: Whether the Action is allowed or not for the Role
          example: true
          type: boolean
        role:
          description: A valid Role ID. Available Role IDs include 'admin' and 'basic_member'.
          example: admin
          type: string
      required:
      - action
      - allowed
      - role
      title: Policy
      type: object
    PoolerPgbouncerPoolMode:
      description: The PgBouncer configuration
      enum:
      - session
      - transaction
      type: string
    PoolerTemplateSpecContainersResources:
      description: "Compute Resources required by this container. Cannot be updated.\
        \ More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"
      properties:
        claims:
          description: |-
            Claims lists the names of resources, defined in spec.resourceClaims, that are used by this container.
            This is an alpha field and requires enabling the DynamicResourceAllocation feature gate.
            This field is immutable. It can only be set for containers.
          items:
            $ref: '#/components/schemas/PoolerTemplateSpecContainersResourcesClaims'
          nullable: true
          type: array
        limits:
          additionalProperties:
            $ref: '#/components/schemas/IntOrString'
          description: "Limits describes the maximum amount of compute resources allowed.\
            \ More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"
          nullable: true
          type: object
        requests:
          additionalProperties:
            $ref: '#/components/schemas/IntOrString'
          description: "Requests describes the minimum amount of compute resources\
            \ required. If Requests is omitted for a container, it defaults to Limits\
            \ if that is explicitly specified, otherwise to an implementation-defined\
            \ value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"
          nullable: true
          type: object
      type: object
    PoolerTemplateSpecContainersResourcesClaims:
      description: ResourceClaim references one entry in PodSpec.ResourceClaims.
      properties:
        name:
          description: Name must match the name of one entry in pod.spec.resourceClaims
            of the Pod where this field is used. It makes that resource available
            inside a container.
          type: string
      required:
      - name
      type: object
    Probe:
      properties:
        initialDelaySeconds:
          format: int32
          minimum: 0
          type: integer
        path:
          type: string
        port:
          format: int32
          type: integer
      required:
      - initialDelaySeconds
      - path
      - port
      type: object
    Probes:
      description: |-
        Probes are used to determine the health of a container.
        You define this in the same manner as you would for all Kubernetes containers.
        See the [Kubernetes docs](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/).
      properties:
        liveness:
          $ref: '#/components/schemas/Probe'
        readiness:
          $ref: '#/components/schemas/Probe'
      required:
      - liveness
      - readiness
      type: object
    ReplacePathRegexConfig:
      properties:
        config:
          $ref: '#/components/schemas/ReplacePathRegexConfigType'
        name:
          type: string
      required:
      - config
      - name
      type: object
    ReplacePathRegexConfigType:
      properties:
        regex:
          type: string
        replacement:
          type: string
      required:
      - regex
      - replacement
      type: object
    Replicas:
      format: int32
      type: integer
    Resource:
      properties:
        cpu:
          type: string
        memory:
          type: string
      required:
      - cpu
      - memory
      type: object
    ResourceRequirements:
      properties:
        limits:
          allOf:
          - $ref: '#/components/schemas/Resource'
          nullable: true
        requests:
          allOf:
          - $ref: '#/components/schemas/Resource'
          nullable: true
      type: object
    Restore:
      example:
        instance_id: instance_id
        recovery_target_time: 2000-01-23T04:56:07.000+00:00
      properties:
        instance_id:
          type: string
        recovery_target_time:
          format: date-time
          nullable: true
          type: string
      required:
      - instance_id
      type: object
    RestoreInstance:
      example:
        environment: ""
        extra_domains_rw:
        - extra_domains_rw
        - extra_domains_rw
        instance_name: instance_name
        memory: ""
        restore:
          instance_id: instance_id
          recovery_target_time: 2000-01-23T04:56:07.000+00:00
        app_services:
        - restapi: ""
        - restapi: ""
        cpu: ""
        autoscaling: ""
        storage: ""
        connection_pooler: ""
      properties:
        app_services:
          items:
            $ref: '#/components/schemas/AppType'
          nullable: true
          type: array
        autoscaling:
          allOf:
          - $ref: '#/components/schemas/PatchAutoscaling'
          nullable: true
        connection_pooler:
          allOf:
          - $ref: '#/components/schemas/ConnectionPooler'
          nullable: true
        cpu:
          allOf:
          - $ref: '#/components/schemas/Cpu'
          nullable: true
        environment:
          allOf:
          - $ref: '#/components/schemas/Environment'
          nullable: true
        extra_domains_rw:
          items:
            type: string
          nullable: true
          type: array
        instance_name:
          type: string
        memory:
          allOf:
          - $ref: '#/components/schemas/Memory'
          nullable: true
        restore:
          $ref: '#/components/schemas/Restore'
        storage:
          allOf:
          - $ref: '#/components/schemas/Storage'
          nullable: true
      required:
      - instance_name
      - restore
      type: object
    Role:
      example:
        name: name
        id: id
      properties:
        id:
          description: A valid Role ID. Available Role IDs include 'admin' and 'basic_member'.
          type: string
        name:
          description: The name of the Role.
          type: string
      required:
      - id
      - name
      type: object
    Routing:
      description: |-
        Routing is used if there is a routing port, then a service is created using
        that Port when ingress_path is present, an ingress is created. Otherwise, no
        ingress is created
      properties:
        entryPoints:
          items:
            type: string
          nullable: true
          type: array
        ingressPath:
          nullable: true
          type: string
        ingressType:
          allOf:
          - $ref: '#/components/schemas/IngressType'
          nullable: true
        middlewares:
          description: provide name of the middleware resources to apply to this route
          items:
            type: string
          nullable: true
          type: array
        port:
          format: int32
          minimum: 0
          type: integer
      required:
      - port
      type: object
    SearchParams:
      properties:
        limit:
          description: "The number of results to return. Default is 10, max is 20."
          format: int32
          nullable: true
          type: integer
        query:
          description: "The search query. For example, \"how to create a Tembo instance\""
          type: string
      required:
      - query
      type: object
    SearchResponse:
      example:
        file_path: file_path
        front_matter: ""
        similarity_score: 0.8008281904610115
      properties:
        file_path:
          description: The file path (in Tembo website repo) to the Tembo document
          type: string
        front_matter:
          nullable: true
        similarity_score:
          format: double
          type: number
      required:
      - file_path
      - similarity_score
      type: object
    StackType:
      enum:
      - Analytics
      - Geospatial
      - MachineLearning
      - MessageQueue
      - MongoAlternative
      - OLTP
      - ParadeDB
      - Standard
      - Timeseries
      - VectorDB
      type: string
    State:
      enum:
      - Submitted
      - Up
      - Configuring
      - Error
      - Restarting
      - Starting
      - Stopping
      - Stopped
      - Deleting
      - Deleted
      type: string
    Storage:
      enum:
      - 10Gi
      - 50Gi
      - 100Gi
      - 200Gi
      - 300Gi
      - 400Gi
      - 500Gi
      - 1Ti
      - 1.5Ti
      - 2Ti
      type: string
    StorageConfig:
      properties:
        volumeMounts:
          items:
            $ref: '#/components/schemas/VolumeMount'
          nullable: true
          type: array
      type: object
    StripPrefixConfig:
      properties:
        config:
          items:
            type: string
          type: array
        name:
          type: string
      required:
      - config
      - name
      type: object
    TrunkInstall:
      description: |-
        TrunkInstall allows installation of extensions from the [pgtrunk](https://pgt.dev)
        registry.  This list should be a list of extension names and versions that you wish to
        install at runtime using the pgtrunk API.

        This example will install the pg_stat_statements extension at version 1.10.0.

        ```yaml
        apiVersion: coredb.io/v1alpha1
        kind: CoreDB
        metadata:
        name: test-db
        spec:
        trunk_installs:
        - name: pg_stat_statements
        version: 1.10.0
        ```
      example:
        name: name
        version: version
      properties:
        name:
          description: |-
            The name of the extension to install. This must be the name of the extension as it
            appears in the [pgtrunk](https://pgt.dev) registry.
          type: string
        version:
          description: |-
            The version of the extension to install. If not specified, the latest version will
            be used. (Optional)
          nullable: true
          type: string
      required:
      - name
      type: object
    TrunkInstallStatus:
      example:
        error_message: error_message
        installed_to_pods:
        - installed_to_pods
        - installed_to_pods
        name: name
        error: true
        loading: true
        version: version
      properties:
        error:
          type: boolean
        error_message:
          nullable: true
          type: string
        installed_to_pods:
          items:
            type: string
          nullable: true
          type: array
        loading:
          type: boolean
        name:
          type: string
        version:
          nullable: true
          type: string
      required:
      - error
      - name
      type: object
    VolumeMount:
      properties:
        mount_path:
          type: string
        mount_propagation:
          nullable: true
          type: string
        name:
          type: string
        read_only:
          nullable: true
          type: boolean
        sub_path:
          nullable: true
          type: string
        sub_path_expr:
          nullable: true
          type: string
      required:
      - mount_path
      - name
      type: object
    dedicated_networking:
      description: Configuration for dedicated networking.
      properties:
        enabled:
          description: Enables or disables dedicated networking. Default is false.
          nullable: true
          type: boolean
        includeStandby:
          description: "If true, includes the standby instance in the dedicated networking\
            \ setup. Default is false."
          nullable: true
          type: boolean
      type: object
    AppType_oneOf:
      example:
        restapi: ""
      properties:
        restapi:
          allOf:
          - $ref: '#/components/schemas/AppConfig'
          nullable: true
      required:
      - restapi
      type: object
    AppType_oneOf_1:
      properties:
        http:
          allOf:
          - $ref: '#/components/schemas/AppConfig'
          nullable: true
      required:
      - http
      type: object
    AppType_oneOf_2:
      properties:
        mq-api:
          allOf:
          - $ref: '#/components/schemas/AppConfig'
          nullable: true
      required:
      - mq-api
      type: object
    AppType_oneOf_3:
      properties:
        embeddings:
          allOf:
          - $ref: '#/components/schemas/AppConfig'
          nullable: true
      required:
      - embeddings
      type: object
    AppType_oneOf_4:
      properties:
        pganalyze:
          allOf:
          - $ref: '#/components/schemas/AppConfig'
          nullable: true
      required:
      - pganalyze
      type: object
    AppType_oneOf_5:
      properties:
        sqlrunner:
          allOf:
          - $ref: '#/components/schemas/AppConfig'
          nullable: true
      required:
      - sqlrunner
      type: object
    AppType_oneOf_6:
      properties:
        custom:
          $ref: '#/components/schemas/AppService'
      required:
      - custom
      type: object
    IntOrString_oneOf:
      properties:
        Int:
          format: int32
          type: integer
      required:
      - Int
      type: object
    IntOrString_oneOf_1:
      properties:
        String:
          type: string
      required:
      - String
      type: object
    Middleware_oneOf:
      properties:
        customRequestHeaders:
          $ref: '#/components/schemas/HeaderConfig'
      required:
      - customRequestHeaders
      type: object
    Middleware_oneOf_1:
      properties:
        stripPrefix:
          $ref: '#/components/schemas/StripPrefixConfig'
      required:
      - stripPrefix
      type: object
    Middleware_oneOf_2:
      properties:
        replacePathRegex:
          $ref: '#/components/schemas/ReplacePathRegexConfig'
      required:
      - replacePathRegex
      type: object
  securitySchemes:
    jwt_token:
      bearerFormat: JWT
      scheme: bearer
      type: http
